{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Task Scheduling Library","text":"<p>\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684Python\u4efb\u52a1\u8c03\u5ea6\u5e93,\u652f\u6301\u5f02\u6b65\u548c\u540c\u6b65\u4efb\u52a1\u6267\u884c,\u63d0\u4f9b\u5f3a\u5927\u7684\u4efb\u52a1\u7ba1\u7406\u548c\u76d1\u63a7\u529f\u80fd(\u5df2\u652f\u6301<code>NO GIL</code>)</p>"},{"location":"#_1","title":"\u6838\u5fc3\u529f\u80fd","text":"<p>!!!\u8b66\u544a!!! (\u5b9e\u9a8c\u6027\u529f\u80fd)\u4e3a\u6d4b\u8bd5\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f02\u5e38\u548c\u5176\u4ed6\u95ee\u9898</p> <ul> <li>\u4efb\u52a1\u8c03\u5ea6: \u652f\u6301\u5f02\u6b65\u4ee3\u7801\u548c\u540c\u6b65\u4ee3\u7801,\u76f8\u540c\u540d\u79f0\u7684\u4efb\u52a1\u81ea\u52a8\u6392\u961f\u6267\u884c</li> <li>\u4efb\u52a1\u7ba1\u7406: \u5f3a\u5927\u7684\u4efb\u52a1\u72b6\u6001\u76d1\u63a7\u548c\u7ba1\u7406\u80fd\u529b</li> <li>\u7075\u6d3b\u63a7\u5236: \u652f\u6301\u5411\u6267\u884c\u4ee3\u7801\u53d1\u9001(\u7ec8\u6b62,\u6682\u505c,\u6062\u590d)\u547d\u4ee4</li> <li>\u8d85\u65f6\u5904\u7406: \u53ef\u4e3a\u4efb\u52a1\u542f\u7528\u8d85\u65f6\u68c0\u6d4b,\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1\u4f1a\u88ab\u5f3a\u5236\u7ec8\u6b62</li> <li>\u72b6\u6001\u67e5\u8be2: \u901a\u8fc7\u63a5\u53e3\u76f4\u63a5\u83b7\u53d6\u4efb\u52a1\u5f53\u524d\u72b6\u6001\u6216\u8005\u7f51\u9875\u63a7\u5236\u7aef</li> <li>\u667a\u80fd\u4f11\u7720: \u65e0\u4efb\u52a1\u65f6\u4f1a\u81ea\u52a8\u4f11\u7720\u8282\u7701\u8d44\u6e90</li> <li>\u4f18\u5148\u7ea7\u7ba1\u7406: \u5728\u4efb\u52a1\u8fc7\u591a\u65f6\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4f1a\u4f18\u5148\u8fd0\u884c</li> <li>\u7ed3\u679c\u83b7\u53d6: \u53ef\u4ee5\u83b7\u53d6\u4efb\u52a1\u8fd4\u56de\u7684\u8fd0\u884c\u7ed3\u679c</li> <li>\u4efb\u52a1\u7981\u7528\u7ba1\u7406: \u53ef\u4ee5\u5728\u9ed1\u540d\u5355\u4e2d\u6dfb\u52a0\u4efb\u52a1\u540d\u79f0,\u8be5\u540d\u79f0\u7684\u4efb\u52a1\u6dfb\u52a0\u4f1a\u88ab\u963b\u62e6</li> <li>\u961f\u5217\u4efb\u52a1\u53d6\u6d88: \u53ef\u4ee5\u53d6\u6d88\u8fd8\u5728\u6392\u961f\u7684\u540c\u540d\u79f0\u7684\u6240\u6709\u4efb\u52a1</li> <li>\u7ebf\u7a0b\u7ea7\u4efb\u52a1\u7ba1\u7406: \u7075\u6d3b\u7684\u4efb\u52a1\u7ed3\u6784\u7ba1\u7406</li> <li>\u4efb\u52a1\u6811\u6a21\u5f0f\u7ba1\u7406: \u5f53\u4e3b\u4efb\u52a1\u7ed3\u675f,\u5176\u4ed6\u6240\u6709\u5206\u652f\u4efb\u52a1\u90fd\u4f1a\u88ab\u9500\u6bc1</li> <li>\u4f9d\u8d56\u578b\u4efb\u52a1\u6267\u884c: \u4f9d\u8d56\u4e8e\u4e3b\u4efb\u52a1\u8fd4\u56de\u7ed3\u679c\u8fd0\u884c\u7684\u51fd\u6570\u5c06\u542f\u52a8\u5e76\u8fd0\u884c</li> <li>\u4efb\u52a1\u91cd\u8bd5: \u5728\u5bf9\u5e94\u7684\u62a5\u9519\u53d1\u751f\u65f6\u91cd\u65b0\u5c1d\u8bd5\u8fd0\u884c\u4efb\u52a1</li> <li>\u5206\u5e03\u5f0f\u7ba1\u7406(\u5b9e\u9a8c\u6027\u529f\u80fd): \u53ef\u4ee5\u4f7f\u7528\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u52a0\u4e2d\u8f6c\u670d\u52a1\u5668\u6a21\u5f0f</li> </ul>"},{"location":"#_2","title":"\u672a\u6765\u7684\u8ba1\u5212","text":"<ul> <li>\u5b8c\u5584\u5206\u5e03\u5f0f\u903b\u8f91,\u76ee\u524d\u53ea\u80fd\u7b97\u662f\u4e00\u4e2a\u53ef\u4ee5\u7528\u7684\u9636\u6bb5</li> <li>\u82f1\u6587\u8bf4\u660e,\u4e5f\u8bb8\u5427</li> </ul>"},{"location":"#_3","title":"\u5b89\u88c5\u65b9\u6cd5","text":"<pre><code>pip install --upgrade task_scheduling\n</code></pre>"},{"location":"#_4","title":"\u611f\u8c22","text":"<p>https://github.com/glenfant/stopit \u611f\u8c22\u8fd9\u4e2a\u5e93\u7ed9\u4e88\u6211\u4e86\u4e00\u4e2a\u5f88\u5de7\u5999\u5730\u601d\u7ef4\u53bb\u5904\u7406\u4efb\u52a1\u63a7\u5236\u76f8\u5173\u7684\u903b\u8f91</p> <p>\u4e3a\u4e86\u4fbf\u4e8e\u540e\u7eed\u4fee\u6539\u6211\u5c06\u5b83\u653e\u5728\u5e93\u5185\u90e8,\u800c\u4e0d\u662f\u901a\u8fc7 pip \u5b89\u88c5\u7684,\u6240\u4ee5\u8fd9\u91cc\u660e\u786e\u8bf4\u660e\u5e76\u611f\u8c22</p>"},{"location":"advice/","title":"\u5fe0\u544a","text":""},{"location":"advice/#_1","title":"\u4f7f\u7528\u5fe0\u544a","text":"<p>\u4ee3\u7801\u5728\u8bb8\u591a\u5730\u65b9\u505a\u4e86\u9650\u5236\u548c\u5f02\u5e38\u72b6\u6001\u5904\u7406,\u4f46\u8bf7\u6ce8\u610f: \u8fd9\u4e9b\u673a\u5236\u4ec5\u4f5c\u4e3a\u5e94\u6025\u4f7f\u7528,\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u5b8c\u5168\u65e0\u526f\u4f5c\u7528\u6216\u95ee\u9898.\u8bf7\u5728\u4f7f\u7528\u65f6\u9075\u5faa\u4ee5\u4e0b\u5efa\u8bae,\u4ee5\u786e\u4fdd\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027:</p> <ol> <li> <p>\u8bf7\u52ff\u8fc7\u5ea6\u4f9d\u8d56\u5f02\u5e38\u5904\u7406\u673a\u5236,\u7cfb\u7edf\u63d0\u4f9b\u7684\u5f02\u5e38\u6355\u83b7,\u91cd\u8bd5,\u8d85\u65f6\u7ec8\u6b62\u7b49\u529f\u80fd,\u5e76\u975e\u4e07\u80fd\u89e3\u51b3\u65b9\u6848,\u8fc7\u5ea6\u4f9d\u8d56\u8fd9\u4e9b\u673a\u5236\u53ef\u80fd\u5bfc\u81f4:</p> </li> <li> <p>\u4efb\u52a1\u72b6\u6001\u4e0d\u4e00\u81f4</p> </li> <li> <p>\u8d44\u6e90\u6cc4\u6f0f(\u5982\u7ebf\u7a0b/\u8fdb\u7a0b\u672a\u6b63\u786e\u91ca\u653e)</p> </li> <li> <p>\u65e5\u5fd7\u6df7\u4e71,\u96be\u4ee5\u5b9a\u4f4d\u771f\u5b9e\u95ee\u9898</p> </li> <li> <p>\u7f51\u7edc\u4e0eIO\u64cd\u4f5c\u8bf7\u81ea\u884c\u505a\u597d\u8d85\u65f6\u5904\u7406</p> </li> <li> <p>\u7cfb\u7edf\u63d0\u4f9b\u7684 kill_api \u65e0\u6cd5\u7ec8\u6b62\u963b\u585e\u578b\u4efb\u52a1(\u5982\u672a\u4f7f\u7528<code>interruptible_sleep</code>\u7684<code>time.sleep</code>\u672a\u8bbe\u7f6e\u8d85\u65f6\u7684\u7f51\u7edc\u8bf7\u6c42\u7b49)</p> </li> <li> <p>\u5efa\u8bae:\u5728\u4efb\u52a1\u51fd\u6570\u5185\u90e8\u5bf9\u53ef\u80fd\u963b\u585e\u7684\u64cd\u4f5c\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u673a\u5236,\u907f\u514d\u4efb\u52a1\"\u201c\"\u5361\u6b7b\"</p> </li> <li> <p>\u53ca\u65f6\u5904\u7406\u4efb\u52a1\u8fd4\u56de\u7ed3\u679c</p> </li> <li> <p>\u5982\u679c\u4efb\u52a1\u6709\u8fd4\u56de\u503c,\u8bf7\u53ca\u65f6\u901a\u8fc7<code>get_task_result</code>\u6216\u76f8\u5173\u63a5\u53e3\u83b7\u53d6</p> </li> <li> <p>\u82e5\u4e0d\u9700\u8981\u8fd4\u56de\u503c,\u8bf7\u4e0d\u8981\u5728\u4efb\u52a1\u51fd\u6570\u4e2d\u7f16\u5199\u8fd4\u56de\u8bed\u53e5\uff0c\u907f\u514d\u7ed3\u679c\u5806\u79ef\u548c\u5185\u5b58\u6cc4\u6f0f</p> </li> <li> <p>\u7cfb\u7edf\u4f1a\u6e05\u7406\u957f\u65f6\u95f4\u672a\u88ab\u53d6\u8d70\u7684\u7ed3\u679c,\u4f46\u4ecd\u5efa\u8bae\u7528\u6237\u4e3b\u52a8\u7ba1\u7406\u4efb\u52a1\u7ed3\u679c\u751f\u547d\u5468\u671f</p> </li> <li> <p>\u8c28\u614e\u4f7f\u7528\u5f3a\u5236\u7ec8\u6b62\u4e0e\u6682\u505c\u529f\u80fd</p> </li> <li> <p>\u5f3a\u5236\u7ec8\u6b62(kill)\u53ef\u80fd\u9020\u6210\u8d44\u6e90\u672a\u91ca\u653e\u3001\u72b6\u6001\u4e0d\u4e00\u81f4\u7b49\u95ee\u9898</p> </li> <li> <p>\u6682\u505c(pause)\u529f\u80fd\u5728 <code>Linux/Mac</code> \u4e2d\u4ec5\u652f\u6301\u8fdb\u7a0b\u4efb\u52a1,\u4e14\u8d85\u65f6\u8ba1\u65f6\u5668\u4ecd\u5728\u8fd0\u884c</p> </li> <li> <p>\u5982\u975e\u5fc5\u8981,\u5efa\u8bae\u901a\u8fc7\u4efb\u52a1\u81ea\u8eab\u7684\u903b\u8f91\u63a7\u5236\u5176\u6267\u884c\u6d41\u7a0b,\u800c\u975e\u4f9d\u8d56\u5916\u90e8\u5f3a\u5236\u63a7\u5236</p> </li> <li> <p>\u5408\u7406\u914d\u7f6e,\u907f\u514d\u8d85\u8d1f\u8377\u8fd0\u884c,\u8bf7\u6839\u636e\u5b9e\u9645\u786c\u4ef6\u8d44\u6e90\u548c\u4efb\u52a1\u7c7b\u578b\u8c03\u6574\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u4efb\u52a1\u6570\u91cf\u9650\u5236,\u8fc7\u5ea6\u5e76\u53d1\u53ef\u80fd\u5bfc\u81f4:</p> </li> <li> <p>\u8c03\u5ea6\u5668\u54cd\u5e94\u53d8\u6162</p> </li> <li> <p>\u7cfb\u7edf\u8d1f\u8f7d\u8fc7\u9ad8</p> </li> <li> <p>\u4efb\u52a1\u6267\u884c\u5ef6\u8fdf\u6216\u5931\u8d25</p> </li> </ol>"},{"location":"configuration/","title":"\u914d\u7f6e\u9009\u9879","text":""},{"location":"configuration/#_1","title":"\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e","text":"<p>\u6587\u4ef6\u5b58\u50a8\u5728: <code>task_scheduling/config/config_gil.yaml</code> \u6216 <code>task_scheduling/config/config_no_gil.yaml</code></p> <ul> <li>\u8b66\u544a:</li> </ul> <p><code>no_gil</code>\u548c<code>gil</code>\u5728<code>io_liner_task``timer_task</code>\u6709\u533a\u522b</p>"},{"location":"configuration/#_2","title":"\u914d\u7f6e\u53c2\u6570\u8bf4\u660e","text":"<p>\u4efb\u52a1\u6570\u91cf\u9650\u5236</p> <ul> <li><code>cpu_asyncio_task: 30</code> - CPU \u5bc6\u96c6\u578b\u5f02\u6b65\u4efb\u52a1\u53ef\u4ee5\u8fd0\u884c\u7684\u6700\u5927\u6570\u91cf</li> <li><code>io_asyncio_task: 20</code> - IO \u5bc6\u96c6\u578b\u5f02\u6b65\u4efb\u52a1\u5355\u4e2a\u4e8b\u4ef6\u5faa\u73af\u7684\u8fd0\u884c\u6700\u5927\u4efb\u52a1\u6570</li> <li><code>cpu_liner_task: 30</code> - CPU \u5bc6\u96c6\u578b\u7ebf\u6027\u4efb\u52a1\u4e2d\u8fd0\u884c\u6700\u5927\u4efb\u52a1\u6570</li> <li><code>io_liner_task: 1000</code> (<code>no_gil: 60</code>) - IO \u5bc6\u96c6\u578b\u7ebf\u6027\u4efb\u52a1\u4e2d\u8fd0\u884c\u6700\u5927\u4efb\u52a1\u6570</li> <li><code>timer_task: 1000</code> (<code>no_gil: 60</code>) - \u5b9a\u65f6\u5668\u53ef\u6267\u884c\u6700\u591a\u4efb\u52a1\u6570</li> </ul> <p>\u7cfb\u7edf\u914d\u7f6e</p> <ul> <li><code>maximum_event_loop: 1000</code> - IO \u5bc6\u96c6\u578b\u5f02\u6b65\u4efb\u52a1\u8c03\u5ea6\u5668\u4e8b\u4ef6\u5faa\u73af\u6700\u5927\u521b\u5efa\u6570\u91cf</li> <li><code>max_idle_time: 300</code> - \u5f53\u591a\u957f\u65f6\u95f4\u6ca1\u6709\u4efb\u52a1\u65f6,\u5173\u95ed\u8be5\u4efb\u52a1\u8c03\u5ea6\u5668(\u79d2)</li> <li><code>watch_dog_time: 300</code> - \u5f53\u4efb\u52a1\u8fd0\u884c\u591a\u4e45\u800c\u672a\u5b8c\u6210\u65f6,\u5c1d\u8bd5\u5f3a\u5236\u7ed3\u675f(\u79d2)</li> </ul> <p>\u5b58\u50a8\u914d\u7f6e</p> <ul> <li><code>maximum_task_info_storage: 2000</code> - \u4efb\u52a1\u72b6\u6001\u5b58\u50a8\u5668\u4e2d\u6700\u5927\u5b58\u50a8\u4efb\u52a1\u6570</li> <li><code>maximum_result_storage: 1000</code> - \u5355\u4e2a\u8c03\u5ea6\u5668\u6700\u5927\u50a8\u5b58\u8fd4\u56de\u7ed3\u679c\u6570\u91cf</li> <li><code>maximum_result_time_storage: 20</code> - \u5f53\u4efb\u52a1\u8fd4\u56de\u7ed3\u679c\u591a\u4e45\u6ca1\u6709\u88ab\u53d6\u8d70\u4f1a\u88ab\u6e05\u7406(\u79d2)</li> </ul> <p>IP\u914d\u7f6e</p> <ul> <li><code>proxy_port: 127.0.0.1</code> - \u4ee3\u7406\u670d\u52a1\u5668host</li> <li><code>proxy_host: 7999</code> - \u4ee3\u7406\u670d\u52a1\u5668\u7aef\u53e3</li> <li><code>server_host: 127.0.0.1</code> - \u4e3b\u670d\u52a1\u5668host</li> <li><code>server_port: 8000</code> - \u4e3b\u670d\u52a1\u5668\u7aef\u53e3</li> <li><code>webui_host: 127.0.0.1</code> - \u7f51\u9875\u63a7\u5236\u7aef\u670d\u52a1\u5668host</li> <li><code>webui_port: 8100</code> - \u7f51\u9875\u63a7\u5236\u7aef\u670d\u52a1\u5668\u7aef\u53e3</li> <li><code>get_host: 127.0.0.1</code> - \u7ed3\u679c\u50a8\u5b58\u670d\u52a1\u5668host</li> <li><code>get_port: 8200</code> - \u7ed3\u679c\u50a8\u5b58\u670d\u52a1\u5668\u7aef\u53e3</li> <li><code>control_host: 127.0.0.1</code> - \u63a7\u5236\u670d\u52a1\u5668host</li> <li><code>control_port: 8201</code> - \u63a7\u5236\u670d\u52a1\u5668\u7aef\u53e3</li> <li><code>max_port_attempts: 100</code> - \u4e3b\u670d\u52a1\u5668\u548c\u7f51\u9875\u63a7\u5236\u7aef\u670d\u52a1\u5668\u6700\u5927\u5b58\u5728\u6570\u91cf</li> </ul> <p>\u5176\u4ed6\u914d\u7f6e</p> <ul> <li><code>exception_thrown: false</code> - \u662f\u5426\u5e94\u8be5\u629b\u51fa\u5f02\u5e38\u800c\u4e0d\u6355\u83b7\u4ee5\u4fbf\u5b9a\u4f4d\u9519\u8bef</li> <li><code>network_storage_results: false</code> - \u662f\u5426\u542f\u7528\u7ed3\u679c\u50a8\u5b58\u670d\u52a1\u5668</li> </ul>"},{"location":"configuration/#_3","title":"\u4e34\u65f6\u66f4\u65b0\u914d\u7f6e\u53c2\u6570(\u70ed\u52a0\u8f7d)","text":"<p>update_config(key: str, value: Any) -&gt; Any</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u8bf7\u653e\u5728<code>if __name__ == \"__main__\":</code>\u524d\u9762,\u90e8\u5206\u53c2\u6570\u6ca1\u6cd5\u5728\u8c03\u5ea6\u5668\u542f\u52a8\u540e\u4fee\u6539\u5e76\u751f\u6548,\u6216\u8005\u5728\u5bfc\u5165\u5176\u4ed6\u90e8\u5206\u4e4b\u524d\u4f7f\u7528</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>key: \u952e</p> <p>value: \u503c</p> <p>\u8fd4\u56de\u503c: True\u6216\u8005\u62a5\u9519\u4fe1\u606f</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.common import update_config\n\n# \u66f4\u65b0\u914d\u7f6e\nupdate_config(\"max_idle_time\", 600)\n\nif __name__ == \"__main__\":\n    # \u4f60\u7684\u8fd0\u884c\u4ee3\u7801\n    ...\n</code></pre>"},{"location":"configuration/#_4","title":"\u4e34\u65f6\u66f4\u6539\u52a0\u8f7d\u7684\u914d\u7f6e\u6587\u4ef6(\u70ed\u52a0\u8f7d)","text":"<p>set_config_directory(config_dir: str) -&gt; bool:</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u8bf7\u653e\u5728<code>if __name__ == \"__main__\":</code>\u524d\u9762,\u90e8\u5206\u53c2\u6570\u6ca1\u6cd5\u5728\u542f\u52a8\u540e\u4fee\u6539\u5e76\u751f\u6548</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>config_dir: \u52a0\u8f7d\u6587\u4ef6\u8def\u5f84</p> <p>\u8fd4\u56de: True\u6216False</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.common import set_config_directory\n\n# \u66f4\u65b0\u914d\u7f6e\nset_config_directory(\"\u6587\u4ef6\u4f4d\u7f6e\")\n\nif __name__ == \"__main__\":\n    # \u4f60\u7684\u8fd0\u884c\u4ee3\u7801\n    ...\n</code></pre>"},{"location":"configuration/#_5","title":"\u65e5\u5fd7\u7b49\u7ea7\u8bbe\u7f6e","text":"<p>set_log_level(level: str):</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>level: \u65e5\u5fd7\u7b49\u7ea7\u6bd4\u5982<code>INFO</code>/<code>DEBUG</code>\u9ad8\u4e8e\u7684\u7b49\u7ea7\u5c06\u4f1a\u8f93\u51fa</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.common import set_log_level\n\nset_log_level(\"DEBUG\")\n\nif __name__ == \"__main__\":\n    # \u4f60\u7684\u8fd0\u884c\u4ee3\u7801\n    ...\n</code></pre>"},{"location":"shutdown/","title":"\u8c03\u5ea6\u5668\u5173\u95ed","text":""},{"location":"shutdown/#_1","title":"\u6b63\u5e38\u5173\u95ed","text":"<p>shutdown_scheduler() -&gt; None:</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5728\u5173\u95ed\u8fd0\u884c\u524d\u5fc5\u987b\u6267\u884c\u8be5\u51fd\u6570\u53bb\u7ed3\u675f\u548c\u6e05\u7406\u8fd0\u884c\u4efb\u52a1,\u5728\u5927\u578b\u4efb\u52a1\u8c03\u5ea6\u4e2d\u5efa\u8bae\u5728\u7f51\u9875\u63a7\u5236\u7aef\u5148\u70b9\u51fb<code>Stop Adding Tasks</code>(\u505c\u6b62\u4efb\u52a1\u6dfb\u52a0) \u9632\u6b62\u8fdb\u7a0b\u4efb\u52a1\u521d\u59cb\u5316\u9000\u51fa\u62a5\u9519,\u5982\u679c\u6ca1\u6709\u4f7f\u7528,\u9000\u51fa\u6709\u6982\u7387\u51fa\u73b0\u62a5\u9519,\u8fd9\u662f\u6b63\u5e38\u7684</p> <p>\u4e0d\u4f7f\u7528\u53ef\u80fd\u4f1a\u5bfc\u81f4\u50f5\u5c38\u7ebf\u7a0b\u6216\u8fdb\u7a0b,\u8fd8\u53ef\u80fd\u5bfc\u81f4\u4ee3\u7801\u65e0\u6cd5\u7ed3\u675f,\u5982\u679c\u662f\u5f02\u5e38\u9000\u51fa\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684<code>\u5f02\u5e38\u5173\u95ed</code></p> <p>\u5206\u5e03\u5f0f\u6a21\u5f0f\u4e0d\u9700\u8981\u8c03\u7528,\u5df2\u7ecf\u5199\u5728\u4ee3\u7801\u4e2d\u4e86,\u5173\u95ed\u670d\u52a1\u5668\u4f1a\u81ea\u52a8\u6267\u884c</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.manager import task_scheduler\n\n# \u8981\u8fd0\u884c\u7684\u4ee3\u7801...\n\ntask_scheduler.shutdown_scheduler()\n</code></pre>"},{"location":"shutdown/#_2","title":"\u5f02\u5e38\u5173\u95ed","text":"<p>abnormal_exit_cleanup() -&gt; None:</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u8fd9\u4e2a\u5fc5\u987b\u5728\u5f00\u542f\u8c03\u5ea6\u5668\u524d\u542f\u7528,\u53ea\u6709\u5728\u5f02\u5e38\u9000\u51fa\u6bd4\u5982(\u4ee3\u7801\u62a5\u9519,\u4eba\u4e3a\u7ec8\u6b62\u7b49\u573a\u666f\u4f1a\u751f\u6548,\u5982\u679c\u662f\u4ee3\u7801\u6b63\u5e38\u9000\u51fa\u5c06\u4e0d\u4f1a\u751f\u6548),\u9700\u8981\u5199\u5728 <code>if __name__ == \"__main__\":</code>\u4e0b\u9762</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>if __name__ == \"__main__\":\n    from task_scheduling.task_creation import abnormal_exit_cleanup\n\n    abnormal_exit_cleanup()\n    # \u4f60\u7684\u8fd0\u884c\u4ee3\u7801\n    ...\n</code></pre>"},{"location":"web_control/","title":"\u7f51\u9875\u63a7\u5236","text":""},{"location":"web_control/#_1","title":"\u5f00\u542f\u76d1\u89c6\u9875\u9762","text":"<p>\u7f51\u9875\u7aef\u53ef\u4ee5\u67e5\u770b\u4efb\u52a1\u72b6\u6001,\u8fd0\u884c\u65f6\u95f4,\u53ef\u4ee5\uff08\u6682\u505c,\u7ec8\u6b62,\u6062\u590d\uff09\u4efb\u52a1,\u5efa\u8bae\u5927\u90e8\u5206\u65f6\u5019\u4f7f\u7528\u8be5\u7f51\u7edc\u9875\u9762\u53bb\u63a7\u5236\u4efb\u52a1</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.server_webui import start_task_status_ui\n\n# \u542f\u52a8\u7f51\u9875\u754c\u9762\uff0c\u8bbf\u95ee: http://localhost:8000\nstart_task_status_ui()\n</code></pre> <ul> <li> <p>\u529f\u80fd\u8bf4\u660e</p> </li> <li> <p><code>Stop Adding Task</code> \u505c\u6b62\u4efb\u52a1\u6dfb\u52a0\u5230\u8c03\u5ea6\u5668</p> </li> <li> <p><code>Task Overview</code> \u8c03\u5ea6\u5668\u5404\u7c7b\u4efb\u52a1\u72b6\u6001\u7edf\u8ba1</p> </li> <li> <p>\u6548\u679c\u56fe   </p> </li> </ul>"},{"location":"advanced/dependent_tasks/","title":"\u4f9d\u8d56\u578b\u4efb\u52a1","text":""},{"location":"advanced/dependent_tasks/#_1","title":"\u4f9d\u8d56\u6027\u4efb\u52a1\u672c\u5730(\u8bbe\u7f6e\u67d0\u4e2a\u4efb\u52a1\u51fa\u73b0\u4ec0\u4e48\u60c5\u51b5\u540e\u6267\u884c\u7684\u4efb\u52a1)","text":"<p>task_dependency_local(main_task_id: str, dependent_task: Callable, *args) -&gt; None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5982\u679c\u4e3b\u4efb\u52a1\u8981\u4f20\u56de\u53c2\u6570,\u5fc5\u987b\u4e3a\u5143\u7ec4\u683c\u5f0f,\u4e0d\u63a5\u53d7\u5176\u4ed6\u683c\u5f0f\u7684\u53c2\u6570.</p> <ul> <li>\u529f\u80fd\u8bf4\u660e:</li> </ul> <p>\u4f7f\u7528<code>task_creation</code>\u521b\u5efa\u5b8c\u4e3b\u4efb\u52a1\u540e,\u4f7f\u7528<code>task_dependency_local</code>\u7c7b\u8bbe\u7f6e\u4f9d\u8d56\u4e8e\u4e3b\u4efb\u52a1\u8fd4\u56de\u7ed3\u679c\u7684\u8fd0\u884c\u51fd\u6570\u3002</p> <ul> <li>\u53ef\u7528\u65b9\u6cd5:</li> </ul> <p><code>after_completion</code>: \u4e3b\u4efb\u52a1\u5b8c\u6210\u540e\u8fd0\u884c(\u8fd4\u56de\u503c\u4e0d\u5fc5\u987b)</p> <p><code>after_cancel</code>: \u4e3b\u4efb\u52a1\u88ab\u53d6\u6d88\u540e\u8fd0\u884c</p> <p><code>after_timeout</code>: \u4e3b\u4efb\u52a1\u8d85\u65f6\u540e\u8fd0\u884c</p> <p><code>after_error</code>: \u4e3b\u4efb\u52a1\u9519\u8bef\u540e\u8fd0\u884c</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>main_task_id: \u4e3b\u4efb\u52a1\u7684\u4efb\u52a1id</p> <p>dependent_task: \u8981\u8fd0\u884c\u7684\u4f9d\u8d56\u4efb\u52a1</p> <p>args: \u4f9d\u8d56\u4efb\u52a1\u9700\u8981\u7684\u53c2\u6570,\u4e3b\u4efb\u52a1\u4f20\u56de\u7684\u53c2\u6570\u4f1a\u5728\u6700\u540e\u9762</p> <ul> <li>\u4f9d\u8d56\u4efb\u52a1\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>\u4f9d\u8d56\u4efb\u52a1\u53c2\u6570\u524d6\u4f4d\u5fc5\u987b\u586b\u5199\u4e3a<code>task_creation</code>\u6240\u9700\u8981\u7684\u516d\u4e2a\u53c2\u6570\uff1a</p> <p>delay: \u5ef6\u8fdf\u6267\u884c\u65f6\u95f4\uff08\u79d2\uff09\uff0c\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1(\u4e0d\u4f7f\u7528\u586b\u5199None)</p> <p>daily_time: \u6bcf\u65e5\u6267\u884c\u65f6\u95f4\uff0c\u683c\u5f0f\"HH:MM\"\uff0c\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1(\u4e0d\u4f7f\u7528\u586b\u5199None)</p> <p>function_type: \u51fd\u6570\u7c7b\u578b (<code>FUNCTION_TYPE_IO</code>, <code>FUNCTION_TYPE_CPU</code>, <code>FUNCTION_TYPE_TIMER</code>)</p> <p>timeout_processing: \u662f\u5426\u542f\u7528\u8d85\u65f6\u68c0\u6d4b\u548c\u5f3a\u5236\u7ec8\u6b62 (<code>True</code>, <code>False</code>)</p> <p>func: \u8981\u6267\u884c\u7684\u51fd\u6570</p> <p>priority: \u4efb\u52a1\u4f18\u5148\u7ea7 (<code>priority_low</code>, <code>priority_high</code>)</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\n\ndef mian_task(input_info):\n    time.sleep(2.0)\n    return input_info,\n\n\ndef dependent_task(input_info, return_value=None):\n    print(input_info, return_value)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.construct import task_dependency_local\n    from task_scheduling.server_webui import start_task_status_ui\n    from task_scheduling.variable import *\n\n    start_task_status_ui()\n\n    task_id1 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"mian_task\", mian_task, priority_low, \"test1\")\n\n    # \u8bbe\u7f6e\u4e3b\u4efb\u52a1\u5b8c\u6210\u540e\u7684\u4f9d\u8d56\u4efb\u52a1\n    task_dependency_local.after_completion(task_id1, dependent_task,\n                                           None, None, FUNCTION_TYPE_IO, True, \"dependent_task\", priority_low,\n                                           \"test2\")\n    try:\n        while True:\n            time.sleep(1)\n    except KeyboardInterrupt:\n        task_scheduler.shutdown_scheduler()\n</code></pre>"},{"location":"advanced/dependent_tasks/#_2","title":"\u4f9d\u8d56\u6027\u4efb\u52a1\u7f51\u7edc(\u8bbe\u7f6e\u67d0\u4e2a\u4efb\u52a1\u51fa\u73b0\u4ec0\u4e48\u60c5\u51b5\u540e\u6267\u884c\u7684\u4efb\u52a1)","text":"<p>task_dependency_network(main_task_id: str, dependent_task: Callable, *args) -&gt; None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5982\u679c\u4e3b\u4efb\u52a1\u8981\u4f20\u56de\u53c2\u6570,\u5fc5\u987b\u4e3a\u5143\u7ec4\u683c\u5f0f,\u4e0d\u63a5\u53d7\u5176\u4ed6\u683c\u5f0f\u7684\u53c2\u6570.\u8be5\u529f\u80fd\u8981<code>network_storage_results</code>\u4e3a<code>true</code></p> <ul> <li>\u529f\u80fd\u8bf4\u660e:</li> </ul> <p>\u4f7f\u7528<code>task_creation</code>\u521b\u5efa\u5b8c\u4e3b\u4efb\u52a1\u540e,\u4f7f\u7528<code>task_dependency_network</code>\u7c7b\u8bbe\u7f6e\u4f9d\u8d56\u4e8e\u4e3b\u4efb\u52a1\u8fd4\u56de\u7ed3\u679c\u7684\u8fd0\u884c\u51fd\u6570\u3002</p> <ul> <li>\u53ef\u7528\u65b9\u6cd5:</li> </ul> <p><code>after_completion</code>: \u4e3b\u4efb\u52a1\u5b8c\u6210\u540e\u8fd0\u884c(\u8fd4\u56de\u503c\u4e0d\u5fc5\u987b)</p> <p><code>after_cancel</code>: \u4e3b\u4efb\u52a1\u88ab\u53d6\u6d88\u540e\u8fd0\u884c</p> <p><code>after_timeout</code>: \u4e3b\u4efb\u52a1\u8d85\u65f6\u540e\u8fd0\u884c</p> <p><code>after_error</code>: \u4e3b\u4efb\u52a1\u9519\u8bef\u540e\u8fd0\u884c</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>main_task_id: \u4e3b\u4efb\u52a1\u7684\u4efb\u52a1id</p> <p>dependent_task: \u8981\u8fd0\u884c\u7684\u4f9d\u8d56\u4efb\u52a1</p> <p>args: \u4f9d\u8d56\u4efb\u52a1\u9700\u8981\u7684\u53c2\u6570,\u4e3b\u4efb\u52a1\u4f20\u56de\u7684\u53c2\u6570\u4f1a\u5728\u6700\u540e\u9762</p> <ul> <li>\u4f9d\u8d56\u4efb\u52a1\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>\u4f9d\u8d56\u4efb\u52a1\u53c2\u6570\u524d6\u4f4d\u5fc5\u987b\u586b\u5199\u4e3a<code>task_creation</code>\u6240\u9700\u8981\u7684\u516d\u4e2a\u53c2\u6570\uff1a</p> <p>delay: \u5ef6\u8fdf\u6267\u884c\u65f6\u95f4\uff08\u79d2\uff09\uff0c\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1(\u4e0d\u4f7f\u7528\u586b\u5199None)</p> <p>daily_time: \u6bcf\u65e5\u6267\u884c\u65f6\u95f4\uff0c\u683c\u5f0f\"HH:MM\"\uff0c\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1(\u4e0d\u4f7f\u7528\u586b\u5199None)</p> <p>function_type: \u51fd\u6570\u7c7b\u578b (<code>FUNCTION_TYPE_IO</code>, <code>FUNCTION_TYPE_CPU</code>, <code>FUNCTION_TYPE_TIMER</code>)</p> <p>timeout_processing: \u662f\u5426\u542f\u7528\u8d85\u65f6\u68c0\u6d4b\u548c\u5f3a\u5236\u7ec8\u6b62 (<code>True</code>, <code>False</code>)</p> <p>func: \u8981\u6267\u884c\u7684\u51fd\u6570</p> <p>priority: \u4efb\u52a1\u4f18\u5148\u7ea7 (<code>priority_low</code>, <code>priority_high</code>)</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>def mian_task(input_info):\n    import time\n    time.sleep(2.0)\n    return input_info,\n\n\ndef dependent_task(input_info, return_value=None):\n    print(input_info, return_value)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import submit_task\n    from task_scheduling.construct import task_dependency_network\n    from task_scheduling.result_server import result_server\n    from task_scheduling.variable import *\n    import time\n\n    result_server.start_server()\n\n    task_id1 = submit_task(None, None, FUNCTION_TYPE_IO, True, \"mian_task\", mian_task, priority_low, \"test1\")\n\n    # \u8bbe\u7f6e\u4e3b\u4efb\u52a1\u5b8c\u6210\u540e\u7684\u4f9d\u8d56\u4efb\u52a1\n    task_dependency_network.after_completion(task_id1, dependent_task,\n                                             None, None, FUNCTION_TYPE_IO, True, \"dependent_task\", priority_low,\n                                             \"test2\")\n    try:\n        while True:\n            time.sleep(1)\n    except KeyboardInterrupt:\n        pass\n</code></pre>"},{"location":"advanced/task_retry/","title":"\u4efb\u52a1\u91cd\u8bd5","text":""},{"location":"advanced/task_retry/#_1","title":"\u91cd\u8bd5\u88c5\u9970\u5668(\u4f7f\u7528\u8be5\u88c5\u9970\u5668\u540e,\u4efb\u52a1\u89e6\u53d1\u5bf9\u5e94\u62a5\u9519\u540e\u4f1a\u5c1d\u8bd5\u91cd\u65b0\u8fd0\u884c\u591a\u6b21)","text":"<p>retry_on_error(exceptions: Union[Type[Exception], Tuple[Type[Exception], ...], None], max_attempts: int, delay: Union[float, int]) -&gt; Any</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>exceptions: \u5f53\u4ec0\u4e48\u9519\u8bef\u7c7b\u578b\u53d1\u751f\u624d\u5f00\u59cb\u91cd\u8bd5</p> <p>max_attempts: \u6700\u5927\u5c1d\u8bd5\u6b21\u6570</p> <p>delay: \u6bcf\u6b21\u91cd\u8bd5\u7684\u95f4\u9694\u65f6\u95f4</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.construct import retry_on_error\n\n\n@retry_on_error(exceptions=TypeError, max_attempts=3, delay=1.0)\ndef linear_task(input_info):\n    while True:\n        print(input_info)\n        time.sleep(input_info)\n\n\nfrom task_scheduling.common import set_log_level\n\nset_log_level(\"DEBUG\")\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.variable import *\n\n    task_creation(\n        None, None, FUNCTION_TYPE_CPU, True, \"task1\",\n        linear_task, priority_low, \"test\"\n    )\n\n    try:\n        while True:\n            time.sleep(1)\n    except KeyboardInterrupt:\n        task_scheduler.shutdown_scheduler()\n</code></pre> <pre><code>def linear_task(input_info):\n    import time\n    from task_scheduling.construct import retry_on_error\n    @retry_on_error(exceptions=Exception, max_attempts=3, delay=1.0)\n    def main():\n        while True:\n            print(input_info)\n            time.sleep(input_info)\n\n    main()\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import submit_task\n    from task_scheduling.variable import *\n\n    submit_task(\n        None, None, FUNCTION_TYPE_CPU, True, \"task1\",\n        linear_task, priority_low, \"test\"\n    )\n</code></pre>"},{"location":"advanced/task_tree/","title":"\u4efb\u52a1\u6811\u6a21\u5f0f","text":""},{"location":"advanced/task_tree/#_1","title":"\u4efb\u52a1\u6811\u6a21\u5f0f(\u6240\u6709\u4efb\u52a1\u90fd\u4f1a\u4f9d\u9644\u5728\u4e00\u4e2a\u4e3b\u7ebf\u7a0b\u4e0a,\u5f53\u4e3b\u7ebf\u7a0b\u7ec8\u6b62,\u6240\u6709\u4f9d\u9644\u4e8e\u4ed6\u7684\u4efb\u52a1\u90fd\u4f1a\u7ec8\u6b62)","text":"<p>task_group(share_info: Any, sharedtaskdict: Any, task_signal_transmission: Any, task_dict: Dict) -&gt; None:</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u8be5\u529f\u80fd\u6ca1\u6cd5\u8fd0\u884c\u5728\u5206\u5e03\u5f0f\u670d\u52a1\u5668\u6a21\u5f0f</p> <ul> <li>\u529f\u80fd\u8bf4\u660e:</li> </ul> <p>\u5b57\u5178\u4e2d\u7684\u4efb\u52a1\u540d\u5b57\u5c06\u4f1a\u4ee5<code>task_group_name|task_name</code>\u663e\u793a,\u5f53\u540d\u5b57\u4efb\u52a1\u4e3a<code>task_group_name</code>\u88ab\u7ed3\u675f,\u6240\u6709\u7684\u4ee5 <code>task_group_name|task_name</code>\u663e\u793a\u7684\u4efb\u52a1\u90fd\u4f1a\u4e00\u5e76\u7ed3\u675f,<code>task_group_name</code>\u662f\u8fd9\u4e2a\u4efb\u52a1\u6811\u4e2d\u7684\u4e3b\u4efb\u52a1( \u8be5\u4efb\u52a1\u5b9e\u9645\u53ea\u662f\u4e00\u4e2a\u8f7d\u4f53,\u6ca1\u6709\u529f\u80fd)</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_group_name: \u8fd9\u4e2a\u4efb\u52a1\u6811\u4e2d\u7684\u4e3b\u4efb\u52a1\u540d\u5b57(\u8be5\u4efb\u52a1\u5b9e\u9645\u53ea\u662f\u4e00\u4e2a\u8f7d\u4f53,\u6ca1\u6709\u529f\u80fd),\u6240\u6709\u7684\u5206\u652f\u4efb\u52a1\u90fd\u4f1a\u52a0\u4e0a\u8be5\u4e3b\u4efb\u52a1\u7684\u540d\u5b57</p> <p>task_dict: <code>\u952e</code>\u5b58\u50a8\u4efb\u52a1\u540d\u5b57,<code>\u503c</code>\u5b58\u50a8\u8981\u6267\u884c\u7684\u51fd\u6570,\u662f\u5426\u542f\u7528\u8d85\u65f6\u68c0\u6d4b\u5f3a\u5236\u7ec8\u6b62 (<code>True</code>, <code>False</code>) \u548c\u51fd\u6570\u9700\u8981\u7684\u53c2\u6570 ( \u5fc5\u987b\u6309\u7167\u987a\u5e8f)</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\n\ndef liner_task(input_info):\n    while True:\n        time.sleep(1)\n        print(input_info)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.quick_creation import task_group\n    from task_scheduling.server_webui import start_task_status_ui\n    from task_scheduling.variable import *\n\n    start_task_status_ui()\n\n    task_group_name = \"main_task\"\n\n    task_dict = {\n        \"task1\": (liner_task, True, 1111),\n        \"task2\": (liner_task, True, 2222),\n        \"task3\": (liner_task, True, 3333),\n    }\n\n    task_id1 = task_creation(\n        None, None, FUNCTION_TYPE_CPU, True, task_group_name,\n        task_group, priority_low, task_dict)\n\n    try:\n        while True:\n            time.sleep(1)\n    except KeyboardInterrupt:\n        task_scheduler.shutdown_scheduler()\n</code></pre> <pre><code>def liner_task(input_info):\n    import time\n    while True:\n        time.sleep(1)\n        print(input_info)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import submit_task\n    from task_scheduling.construct import task_group\n    from task_scheduling.variable import *\n\n    task_group_name = \"main_task\"\n\n    task_dict = {\n        \"task1\": (liner_task, True, 1111),\n        \"task2\": (liner_task, True, 2222),\n        \"task3\": (liner_task, True, 3333),\n    }\n\n    task_id1 = submit_task(\n        None, None, FUNCTION_TYPE_CPU, True, task_group_name,\n        task_group, priority_low, task_dict)\n\n    print(task_id1)\n</code></pre>"},{"location":"advanced/thread_tasks/","title":"\u7ebf\u7a0b\u4efb\u52a1\u7ba1\u7406","text":""},{"location":"advanced/thread_tasks/#_1","title":"\u7ebf\u7a0b\u7ea7\u4efb\u52a1(\u53ef\u4ee5\u8ba9\u5728\u8c03\u5ea6\u5668\u4e2d\u7684\u4efb\u52a1\u5728\u6b64\u63d0\u4ea4\u4efb\u52a1\u7684\u529f\u80fd,\u5e76\u4e14\u4e0d\u7528\u7ba1\u7406\u751f\u547d\u5faa\u73af)","text":"<ul> <li>\u8b66\u544a:</li> </ul> <p>!!!\u8be5\u529f\u80fd\u53ea\u652f\u6301CPU\u5bc6\u96c6\u578b\u7ebf\u6027\u4efb\u52a1!!!</p> <ul> <li>\u529f\u80fd\u8bf4\u660e:</li> </ul> <p><code>main_task</code>\u4e2d\u524d\u4e09\u4f4d\u63a5\u53d7\u53c2\u6570\u5fc5\u987b\u4e3a<code>share_info</code>, <code>_sharedtaskdict</code>, <code>task_signal_transmission</code>( \u5982\u679c\u5f00\u542f\u4e86\u8be5\u529f\u80fd,\u6b63\u5e38\u4efb\u52a1\u4e5f\u53ef\u4ee5\u4f7f\u7528,\u53ea\u9700\u8981\u4e0d\u4f20\u5165\u524d\u9762\u6240\u8bf4\u7684\u4e09\u4e2a\u53c2\u6570)</p> <p><code>@wait_branch_thread_ended</code>\u5fc5\u987b\u653e\u5728main_task\u4e0a\u9762\uff0c\u9632\u6b62\u4e3b\u7ebf\u7a0b\u7ed3\u675f,\u5206\u652f\u7ebf\u7a0b\u8fd8\u6ca1\u8fd0\u884c\u5b8c\u5bfc\u81f4\u9519\u8bef</p> <p><code>other_task</code>\u4e3a\u9700\u8981\u8fd0\u884c\u7684\u5206\u652f\u7ebf\u7a0b,\u4e0a\u9762\u5fc5\u987b\u6dfb\u52a0<code>@branch_thread_control</code>\u88c5\u9970\u5668\u6765\u63a7\u5236\u548c\u76d1\u89c6</p> <p><code>@branch_thread_control</code>\u88c5\u9970\u5668\u63a5\u6536\u53c2\u6570<code>share_info</code>, <code>_sharedtaskdict</code>, <code>timeout_processing</code>, <code>task_name</code></p> <p><code>task_name</code>\u5fc5\u987b\u662f\u552f\u4e00\u4e0d\u91cd\u590d\u7684,\u7528\u4e8e\u83b7\u53d6\u5176\u4ed6\u5206\u652f\u7ebf\u7a0b\u7684task_id(\u4f7f\u7528<code>_sharedtaskdict.read(task_name)</code> \u83b7\u53d6task_id\u53bb\u7ec8\u6b62\uff0c\u6682\u505c\u6216\u6062\u590d)\u540d\u5b57\u5c06\u6309\u7167<code>main_task_name|task_name</code>\u663e\u793a</p> <p>\u4f7f\u7528<code>threading.Thread</code>\u8bed\u53e5\u5fc5\u987b\u6dfb\u52a0<code>daemon=True</code>\u5c06\u7ebf\u7a0b\u8bbe\u7f6e\u4e3a\u5b88\u62a4\u7ebf\u7a0b( \u6ca1\u6709\u6dfb\u52a0\u4f1a\u8ba9\u5173\u95ed\u64cd\u4f5c\u65f6\u95f4\u589e\u52a0,\u53cd\u6b63\u4e3b\u7ebf\u7a0b\u7ed3\u675f,\u4f1a\u5f3a\u5236\u7ec8\u6b62\u6240\u6709\u5206\u652f\u7ebf\u7a0b)</p> <p>\u6240\u6709\u7684\u5206\u652f\u7ebf\u7a0b\u90fd\u53ef\u4ee5\u5728\u7f51\u9875\u7aef\u67e5\u770b\u5230\u8fd0\u884c\u72b6\u6001(\u5f00\u542f\u7f51\u9875\u7aef\u8bf7\u4f7f\u7528<code>start_task_status_ui()</code>)</p> <ul> <li>\u63a7\u5236\u65b9\u5f0f</li> </ul> <p>\u8fd9\u91cc\u63d0\u4f9b\u4e24\u4e2a\u63a7\u5236\u51fd\u6570:</p> <p>\u5728\u4e3b\u7ebf\u7a0b\u5185\u4f7f\u7528<code>task_signal_transmission[_sharedtaskdict.read(task_name)] = [\"action\"]</code> action\u53ef\u4ee5\u586b\u5199\u4e3a<code>kill</code>, <code>pause</code>, <code>resume</code>, \u4e5f\u53ef\u4ee5\u6309\u987a\u5e8f\u586b\u5199\u51e0\u4e2a\u64cd\u4f5c</p> <p>\u5728\u4e3b\u7ebf\u7a0b\u5916\u90e8\u53ef\u4ee5\u4f7f\u7528\u7f51\u9875\u63a7\u5236\u7aef</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import threading\nimport time\nfrom task_scheduling.construct import wait_branch_thread_ended, branch_thread_control\n\n\n@wait_branch_thread_ended\ndef main_task(share_info, sharedtaskdict, task_signal_transmission, input_info):\n    task_name = \"other_task\"\n    timeout_processing = True\n\n    @branch_thread_control(share_info, sharedtaskdict, timeout_processing, task_name)\n    def other_task(input_info):\n        while True:\n            time.sleep(1)\n            print(input_info)\n\n    threading.Thread(target=other_task, args=(input_info,), daemon=True).start()\n\n    # Use this statement to terminate the branch thread\n    # time.sleep(4)\n    # task_signal_transmission[sharedtaskdict.read(task_name)] = [\"kill\"]\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.server_webui import start_task_status_ui\n    from task_scheduling.variable import *\n\n    start_task_status_ui()\n\n    task_id1 = task_creation(\n        None, None, FUNCTION_TYPE_CPU, True, \"linear_task\",\n        main_task, priority_low, \"test\")\n\n    try:\n        while True:\n            time.sleep(1)\n    except KeyboardInterrupt:\n        task_scheduler.shutdown_scheduler()\n</code></pre> <pre><code>def main_task(share_info, sharedtaskdict, task_signal_transmission, input_info):\n    task_name = \"other_task\"\n    timeout_processing = True\n    import time\n    import threading\n    from task_scheduling.construct import wait_branch_thread_ended, branch_thread_control\n\n    @wait_branch_thread_ended\n    def main():\n        @branch_thread_control(share_info, sharedtaskdict, timeout_processing, task_name)\n        def other_task(input_info):\n            while True:\n                time.sleep(1)\n                print(input_info)\n\n        threading.Thread(target=other_task, args=(input_info,), daemon=True).start()\n\n        # Use this statement to terminate the branch thread\n        # time.sleep(4)\n        # task_signal_transmission[sharedtaskdict.read(task_name)] = [\"kill\"]\n\n    main()\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import submit_task\n    from task_scheduling.variable import *\n\n    task_id1 = submit_task(\n        None, None, FUNCTION_TYPE_CPU, True, \"linear_task\",\n        main_task, priority_low, \"test\")\n</code></pre>"},{"location":"local/create_tasks/","title":"\u4efb\u52a1\u63d0\u4ea4","text":""},{"location":"local/create_tasks/#_1","title":"\u4efb\u52a1\u521b\u5efa\u51fd\u6570","text":"<p>task_creation(delay: int or None, daily_time: str or None, function_type: str, timeout_processing: bool, task_name: str, func: Callable, args, *kwargs) -&gt; str or None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p><code>Windows</code>,<code>Linux</code>,<code>Mac</code>\u5728\u591a\u8fdb\u7a0b\u4e2d\u90fd\u7edf\u4e00\u4f7f\u7528<code>spawn</code></p> <p>IO\u5f02\u6b65\u4efb\u52a1\u4e2d\u5c06\u4e0d\u4f1a\u963b\u62e6\u540c\u540d\u4efb\u52a1\u6267\u884c,\u5c06\u63d0\u4ea4\u540e\u4ea4\u7ed9\u4e8b\u4ef6\u5faa\u73af\u7ba1\u7406,\u5176\u4ed6\u4efb\u52a1\u4e2d\u7684\u540c\u540d\u4efb\u52a1\u90fd\u4f1a\u6392\u961f\u6267\u884c( \u53ef\u4ee5\u5728\u5de5\u5177\u4e00\u680f\u627e\u5230\u968f\u673a\u540d\u5b57\u6765\u7ed5\u8fc7\u8be5\u9650\u5236,\u524d\u63d0\u662f\u8be5\u4efb\u52a1\u6267\u884c\u7684\u4e0d\u662f\u8bfb\u5199\u7b49,\u4e0d\u80fd\u591a\u7ebf\u7a0b\u64cd\u4f5c\u7684\u884c\u4e3a)</p> <p>\u4f7f\u7528\u672c\u5730\u529f\u80fd\u65f6\u5019\u5efa\u8bae\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>network_storage_results</code>\u6539\u4e3a<code>false</code></p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>delay: \u5ef6\u8fdf\u6267\u884c\u65f6\u95f4(\u79d2),\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1(\u4e0d\u4f7f\u7528\u586b\u5199None,\u548c\u4e0b\u9762\u53c2\u6570\u4e8c\u9009\u4e00)</p> <p>daily_time: \u6bcf\u65e5\u6267\u884c\u65f6\u95f4,\u683c\u5f0f\"HH:MM\",\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1,\u4f7f\u752824\u5c0f\u65f6\u5236(\u4e0d\u4f7f\u7528\u586b\u5199None,\u548c\u4e0a\u9762\u53c2\u6570\u4e8c\u9009\u4e00)</p> <p>function_type: \u51fd\u6570\u7c7b\u578b (<code>FUNCTION_TYPE_IO</code>, <code>FUNCTION_TYPE_CPU</code>, <code>FUNCTION_TYPE_TIMER</code>)</p> <p>timeout_processing: \u662f\u5426\u542f\u7528\u8d85\u65f6\u7ec8\u6b62 (<code>True</code>, <code>False</code>)</p> <p>task_name: \u4efb\u52a1\u540d\u79f0,\u76f8\u540c\u540d\u79f0\u7684\u4efb\u52a1\u4f1a\u6392\u961f\u6267\u884c</p> <p>func: \u8981\u6267\u884c\u7684\u51fd\u6570</p> <p>priority: \u4efb\u52a1\u4f18\u5148\u7ea7 (<code>priority_low</code>, <code>priority_high</code>)</p> <p>args, kwargs: \u51fd\u6570\u53c2\u6570</p> <p>\u8fd4\u56de: \u4efb\u52a1ID\u5b57\u7b26\u4e32</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import asyncio\nimport time\nfrom task_scheduling.variable import *\nfrom task_scheduling.utils import interruptible_sleep\n\n\ndef linear_task(input_info):\n    for i in range(10):\n        interruptible_sleep(1)\n        print(f\"Linear task: {input_info} - {i}\")\n\n\nasync def async_task(input_info):\n    for i in range(10):\n        await asyncio.sleep(1)\n        print(f\"Async task: {input_info} - {i}\")\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.server_webui import start_task_status_ui\n\n    start_task_status_ui()\n\n    task_id1 = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"linear_task\",\n        linear_task, priority_low, \"Hello Linear\"\n    )\n\n    task_id2 = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"async_task\",\n        async_task, priority_low, \"Hello Async\"\n    )\n    try:\n        while True:\n            time.sleep(0.1)\n    except KeyboardInterrupt:\n        task_scheduler.shutdown_scheduler()\n</code></pre>"},{"location":"local/create_tasks/#_2","title":"\u547d\u4ee4\u4efb\u52a1\u63d0\u4ea4","text":"<ul> <li>\u8b66\u544a\uff1a</li> </ul> <p>\u4e0d\u652f\u6301\u5bf9\u4e8e\u4efb\u52a1\u7684\u7cbe\u5bc6\u63a7\u5236(\u63a7\u5236\u5668\u5bf9\u975epython\u65e0\u6548)</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>python -m task_scheduling\n\n# The task scheduler starts.\n# Wait for the task to be added.\n# Task status UI available at http://localhost:8000\n\n# \u6dfb\u52a0\u547d\u4ee4: -cmd &lt;command&gt; -n &lt;task_name&gt;\n\n-cmd 'python test.py' -n 'test'\n# Parameter: {'command': 'python test.py', 'name': 'test'}\n# Create a success. task ID: 7fc6a50c-46c1-4f71-b3c9-dfacec04f833\n# Wait for the task to be added.\n# \u4f7f\u7528 `ctrl + c` \u9000\u51fa\u8fd0\u884c\n</code></pre>"},{"location":"local/result_retrieval/","title":"\u7ed3\u679c\u83b7\u53d6","text":""},{"location":"local/result_retrieval/#_1","title":"\u540c\u6b65\u83b7\u53d6\u4efb\u52a1\u7ed3\u679c","text":"<p>get_result_api(task_type: str, task_id: str) -&gt; Any !!!\u8be5\u51fd\u6570\u4e0d\u662f\u5f88\u4f18\u79c0,\u5efa\u8bae\u67e5\u770b\u7f51\u7edc\u529f\u80fd\u4e2d\u7684\u7ed3\u679c\u83b7\u53d6\u65b9\u6cd5!!!</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_type: \u4efb\u52a1\u7c7b\u578b</p> <p>task_id: \u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u4efb\u52a1\u7ed3\u679c,\u5982\u679c\u672a\u5b8c\u6210\u5219\u8fd4\u56deNone</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\n\n\ndef calculation_task(x, y):\n    return x * y\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.scheduler import get_result_api\n\n    task_id = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"long_task\",\n        calculation_task, priority_low, 5, 10\n    )\n\n    while True:\n        result = get_result_api(IO_LINER, task_id)\n        if result is not None:\n            print(result)  # \u8f93\u51fa: 50\n            break\n        time.sleep(1)\n</code></pre>"},{"location":"local/status_query/","title":"\u72b6\u6001\u67e5\u8be2","text":""},{"location":"local/status_query/#_1","title":"\u83b7\u53d6\u6240\u6709\u4efb\u52a1\u72b6\u6001","text":"<p>get_tasks_info() -&gt; str</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>\u8fd4\u56de: \u5305\u542b\u4efb\u52a1\u72b6\u6001\u7684\u5b57\u7b26\u4e32</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\n\nif __name__ == \"__main__\":\n    from task_scheduling.server_webui import get_tasks_info\n    from task_scheduling.manager import task_status_manager\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", lambda: time.sleep(2), priority_low)\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task2\", lambda: time.sleep(3), priority_low)\n\n    time.sleep(1)\n\n    # \u83b7\u53d6\u6240\u6709\u4efb\u52a1\u72b6\u6001\n    print(get_tasks_info())\n</code></pre>"},{"location":"local/status_query/#_2","title":"\u83b7\u53d6\u7279\u5b9a\u4efb\u52a1\u72b6\u6001","text":"<p>get_task_status(task_id: str) -&gt; Optional[Dict[str, Optional[Union[str, float, bool]]]]</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_id: \u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u5305\u542b\u4efb\u52a1\u72b6\u6001\u7684\u5b57\u5178</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\n\nif __name__ == \"__main__\":\n    from task_scheduling.server_webui import get_tasks_info\n    from task_scheduling.manager import task_status_manager\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", lambda: time.sleep(2), priority_low)\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task2\", lambda: time.sleep(3), priority_low)\n\n    time.sleep(1)\n\n    # \u83b7\u53d6\u7279\u5b9a\u4efb\u52a1\u72b6\u6001\n    task_id = \"your_task_id_here\"\n    print(task_status_manager.get_task_status(task_id))\n</code></pre>"},{"location":"local/status_query/#_3","title":"\u83b7\u53d6\u4efb\u52a1\u603b\u6570","text":"<p>get_task_count(task_name) -&gt; int</p> <p>get_all_task_count() -&gt; Dict[str, int]</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_name: \u51fd\u6570\u540d\u5b57</p> <p>\u8fd4\u56de: \u5b57\u5178\u6216\u8005\u6574\u6570</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\n\nif __name__ == \"__main__\":\n    from task_scheduling.server_webui import get_tasks_info\n    from task_scheduling.manager import task_status_manager\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", lambda: time.sleep(2), priority_low)\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task2\", lambda: time.sleep(3), priority_low)\n\n    time.sleep(1)\n\n    # \u83b7\u53d6\u4efb\u52a1\u8ba1\u6570\n    print(task_status_manager.get_task_count(\"task1\"))\n    print(task_status_manager.get_all_task_count())\n</code></pre>"},{"location":"local/task_control/","title":"\u4efb\u52a1\u63a7\u5236","text":""},{"location":"local/task_control/#_1","title":"\u6682\u505c\u6216\u6062\u590d\u4efb\u52a1\u8fd0\u884c","text":"<p>pause_api(task_type: str, task_id: str) -&gt; bool</p> <p>resume_api(task_type: str, task_id: str) -&gt; bool</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u4efb\u52a1\u6682\u505c\u65f6\u5019,\u8d85\u65f6\u8ba1\u65f6\u5668\u4f9d\u7136\u5728\u8fd0\u4f5c,\u5982\u679c\u9700\u8981\u4f7f\u7528\u6682\u505c\u529f\u80fd\u5efa\u8bae\u5173\u95ed\u8d85\u65f6\u5904\u7406,\u9632\u6b62\u5f53\u4efb\u52a1\u6062\u590d\u65f6\u5019\u56e0\u4e3a\u8d85\u65f6\u88ab\u7ec8\u6b62,\u5728<code>Linux</code>,<code>Mac</code> \u4e2d\u4e0d\u652f\u6301\u7ebf\u7a0b\u4efb\u52a1\u6682\u505c\u6062\u590d,\u53ea\u652f\u6301\u8fdb\u7a0b\u8fdb\u7a0b\u4efb\u52a1,\u6682\u505c\u5c06\u6682\u505c\u6574\u4e2a\u8fdb\u7a0b\u7684\u4efb\u52a1</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_type: \u4efb\u52a1\u6240\u5728\u7684\u8c03\u5ea6\u5668 (<code>CPU_ASYNCIO</code>, <code>IO_ASYNCIO</code>, <code>CPU_LINER</code>, <code>IO_LINER</code>, <code>TIMER</code>)</p> <p>task_id: \u8981\u63a7\u5236\u7684\u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u5e03\u5c14\u503c\uff0c\u8868\u793a\u64cd\u4f5c\u662f\u5426\u6210\u529f</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\nfrom task_scheduling.utils import interruptible_sleep\n\n\ndef long_running_task():\n    for i in range(10):\n        interruptible_sleep(1)\n        print(i)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.scheduler import pause_api, resume_api\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n\n    task_id = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"long_task\",\n        long_running_task, priority_low\n    )\n\n    time.sleep(2)\n    pause_api(IO_LINER, task_id)  # \u6682\u505c\u4efb\u52a1\n    time.sleep(2)\n    resume_api(IO_LINER, task_id)  # \u6062\u590d\u4efb\u52a1\n</code></pre>"},{"location":"local/task_control/#_2","title":"\u5f3a\u5236\u7ec8\u6b62\u8fd0\u884c\u4efb\u52a1","text":"<p>kill_api(task_type: str, task_id: str) -&gt; bool</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u4ee3\u7801\u4e0d\u652f\u6301\u7ec8\u6b62\u5835\u585e\u578b\u4efb\u52a1,\u5bf9\u4e8e<code>time.sleep</code>\u7ed9\u51fa\u4e86\u66ff\u4ee3\u7684\u7248\u672c,\u5f53\u8981\u8fdb\u884c\u957f\u65f6\u95f4\u7b49\u5f85\u8bf7\u4f7f\u7528<code>interruptible_sleep</code>,\u5f02\u6b65\u4ee3\u7801\u4f7f\u7528 <code>await asyncio.sleep</code></p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_type: \u4efb\u52a1\u7c7b\u578b</p> <p>task_id: \u8981\u7ec8\u6b62\u7684\u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u5e03\u5c14\u503c\uff0c\u8868\u793a\u7ec8\u6b62\u662f\u5426\u6210\u529f</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\nfrom task_scheduling.utils import interruptible_sleep\n\n\ndef long_running_task():\n    for i in range(10):\n        interruptible_sleep(1)\n        print(i)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.scheduler import pause_api, resume_api, kill_api\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n\n    task_id = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"long_task\",\n        long_running_task, priority_low\n    )\n\n    time.sleep(2)\n    kill_api(IO_LINER, task_id)  # \u7ec8\u6b62\u4efb\u52a1\n</code></pre>"},{"location":"local/task_disabling/","title":"\u4efb\u52a1\u7981\u7528","text":""},{"location":"local/task_disabling/#_1","title":"\u6dfb\u52a0\u6216\u5220\u9664\u7981\u7528\u4efb\u52a1\u540d\u79f0","text":"<p>add_ban_task_name(task_name: str) -&gt; None</p> <p>remove_ban_task_name(task_name: str) -&gt; None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5df2\u7ecf\u8fdb\u5165\u8c03\u5ea6\u5668\u7684\u4efb\u52a1\u5c06\u4e0d\u4f1a\u88ab\u5904\u7406\uff0c\u53ea\u6709\u5728\u4efb\u52a1\u72b6\u6001\u4e3a<code>queued</code>\u624d\u4f1a\u88ab\u53d6\u6d88</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_name: \u51fd\u6570\u540d\u5b57</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\n\ndef line_task(input_info):\n    while True:\n        time.sleep(1)\n        print(input_info)\n\n\ninput_info = \"test\"\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.server_webui import start_task_status_ui\n    from task_scheduling.variable import *\n\n    start_task_status_ui()\n\n    # \u521b\u5efa\u7b2c\u4e00\u4e2a\u4efb\u52a1\n    task_id1 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, input_info)\n\n    # \u6dfb\u52a0\u4efb\u52a1\u540d\u79f0\u5230\u9ed1\u540d\u5355\n    task_scheduler.add_ban_task_name(\"task1\")\n\n    # \u8fd9\u4e2a\u4efb\u52a1\u5c06\u88ab\u62e6\u622a\n    task_id2 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, input_info)\n\n    # \u4ece\u9ed1\u540d\u5355\u79fb\u9664\n    task_scheduler.remove_ban_task_name(\"task1\")\n\n    # \u8fd9\u4e2a\u4efb\u52a1\u53ef\u4ee5\u6b63\u5e38\u521b\u5efa\n    task_id3 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, \"1111\")\n</code></pre>"},{"location":"local/task_disabling/#_2","title":"\u53d6\u6d88\u961f\u5217\u4e2d\u67d0\u7c7b\u4efb\u52a1","text":"<p>cancel_the_queue_task_by_name(task_name: str) -&gt; None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5df2\u7ecf\u8fdb\u5165\u8c03\u5ea6\u5668\u7684\u4efb\u52a1\u5c06\u4e0d\u4f1a\u88ab\u5904\u7406\uff0c\u53ea\u6709\u5728\u4efb\u52a1\u72b6\u6001\u4e3a<code>queued</code>\u624d\u4f1a\u88ab\u53d6\u6d88</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_name: \u51fd\u6570\u540d\u5b57</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\n\ndef line_task(input_info):\n    while True:\n        time.sleep(1)\n        print(input_info)\n\n\ninput_info = \"test\"\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.server_webui import start_task_status_ui\n    from task_scheduling.variable import *\n\n    start_task_status_ui()\n\n    # \u521b\u5efa\u7b2c\u4e00\u4e2a\u4efb\u52a1\n    task_id1 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, input_info)\n\n    # \u53d6\u6d88\u961f\u5217\u4e2d\u7684\u4efb\u52a1\n    task_scheduler.cancel_the_queue_task_by_name(\"task1\")\n</code></pre>"},{"location":"network/create_tasks/","title":"\u4efb\u52a1\u63d0\u4ea4","text":""},{"location":"network/create_tasks/#_1","title":"\u4efb\u52a1\u521b\u5efa\u51fd\u6570","text":"<p>submit_task(delay: int or None, daily_time: str or None, function_type: str, timeout_processing: bool, task_name: str, func: Callable, args, *kwargs) -&gt; str or None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p><code>Windows</code>,<code>Linux</code>,<code>Mac</code>\u5728\u591a\u8fdb\u7a0b\u4e2d\u90fd\u7edf\u4e00\u4f7f\u7528<code>spawn</code></p> <p>IO\u5f02\u6b65\u4efb\u52a1\u4e2d\u5c06\u4e0d\u4f1a\u963b\u62e6\u540c\u540d\u4efb\u52a1\u6267\u884c,\u5c06\u63d0\u4ea4\u540e\u4ea4\u7ed9\u4e8b\u4ef6\u5faa\u73af\u7ba1\u7406,\u5176\u4ed6\u4efb\u52a1\u4e2d\u7684\u540c\u540d\u4efb\u52a1\u90fd\u4f1a\u6392\u961f\u6267\u884c( \u53ef\u4ee5\u5728\u5de5\u5177\u4e00\u680f\u627e\u5230\u968f\u673a\u540d\u5b57\u6765\u7ed5\u8fc7\u8be5\u9650\u5236,\u524d\u63d0\u662f\u8be5\u4efb\u52a1\u6267\u884c\u7684\u4e0d\u662f\u8bfb\u5199\u7b49,\u4e0d\u80fd\u591a\u7ebf\u7a0b\u64cd\u4f5c\u7684\u884c\u4e3a)</p> <p>\u4f7f\u7528\u7f51\u7edc\u529f\u80fd\u65f6\u5019\u5fc5\u987b\u5c06\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684<code>network_storage_results</code>\u6539\u4e3a<code>true</code>,\u6240\u6709\u4ee3\u7801\u7684\u4f7f\u7528\u51fd\u6570\u6216\u8005\u5bfc\u5165\u5e93\u90fd\u5fc5\u987b\u5199\u5728\u63d0\u4ea4\u51fd\u6570 \u5185\u90e8\u88c5\u9970\u5668\u4e5f\u662f\u4e00\u6837\u7684,\u4e0d\u7136\u53cd\u5e8f\u5217\u5316\u548c\u8fd0\u884c\u4f1a\u51fa\u73b0\u95ee\u9898</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>delay: \u5ef6\u8fdf\u6267\u884c\u65f6\u95f4(\u79d2),\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1(\u4e0d\u4f7f\u7528\u586b\u5199None,\u548c\u4e0b\u9762\u53c2\u6570\u4e8c\u9009\u4e00)</p> <p>daily_time: \u6bcf\u65e5\u6267\u884c\u65f6\u95f4,\u683c\u5f0f\"HH:MM\",\u7528\u4e8e\u5b9a\u65f6\u4efb\u52a1,\u4f7f\u752824\u5c0f\u65f6\u5236(\u4e0d\u4f7f\u7528\u586b\u5199None,\u548c\u4e0a\u9762\u53c2\u6570\u4e8c\u9009\u4e00)</p> <p>function_type: \u51fd\u6570\u7c7b\u578b (<code>FUNCTION_TYPE_IO</code>, <code>FUNCTION_TYPE_CPU</code>, <code>FUNCTION_TYPE_TIMER</code>)</p> <p>timeout_processing: \u662f\u5426\u542f\u7528\u8d85\u65f6\u7ec8\u6b62 (<code>True</code>, <code>False</code>)</p> <p>task_name: \u4efb\u52a1\u540d\u79f0,\u76f8\u540c\u540d\u79f0\u7684\u4efb\u52a1\u4f1a\u6392\u961f\u6267\u884c</p> <p>func: \u8981\u6267\u884c\u7684\u51fd\u6570</p> <p>priority: \u4efb\u52a1\u4f18\u5148\u7ea7 (<code>priority_low</code>, <code>priority_high</code>)</p> <p>args, kwargs: \u51fd\u6570\u53c2\u6570</p> <p>\u8fd4\u56de: \u4efb\u52a1ID\u5b57\u7b26\u4e32</p> <ul> <li>\u90e8\u7f72\u6b65\u9aa4:</li> </ul> <p>1.\u542f\u52a8\u4ee3\u7406\u670d\u52a1\u5668</p> <p>\u6ce8\u610f: \u4ee3\u7406\u670d\u52a1\u5668\u53ea\u9700\u8981\u4e00\u4e2a\u5b9e\u4f8b,\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539ip</p> <pre><code>python -m task_scheduling.proxy_server\n</code></pre> <p>2.\u542f\u52a8\u4e3b\u670d\u52a1\u5668</p> <p>\u6ce8\u610f: \u6700\u591a\u53ef\u4ee5\u5f00\u542f100\u4e2a\u4e3b\u670d\u52a1\u5668,\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u4fee\u6539\u6570\u91cf\u548cip</p> <pre><code>python -m task_scheduling.server\n</code></pre> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>def linear_task(input_info):\n    from task_scheduling.utils import interruptible_sleep\n    for i in range(10):\n        interruptible_sleep(1)\n        print(f\"Linear task: {input_info} - {i}\")\n\n\nasync def async_task(input_info):\n    import asyncio\n    for i in range(10):\n        await asyncio.sleep(1)\n        print(f\"Async task: {input_info} - {i}\")\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import submit_task\n    from task_scheduling.variable import *\n\n    task_id1 = submit_task(\n        None, None, FUNCTION_TYPE_IO, True, \"linear_task\",\n        linear_task, priority_low, \"Hello Linear\"\n    )\n\n    task_id2 = submit_task(\n        None, None, FUNCTION_TYPE_IO, True, \"async_task\",\n        async_task, priority_low, \"Hello Async\"\n    )\n</code></pre>"},{"location":"network/result_retrieval/","title":"\u7ed3\u679c\u83b7\u53d6","text":""},{"location":"network/result_retrieval/#_1","title":"\u5f02\u6b65\u83b7\u53d6\u4efb\u52a1\u7ed3\u679c","text":"<p>get_task_result(task_id: str) -&gt; Any !!!\u8be5\u51fd\u6570\u662f\u5f02\u6b65\u51fd\u6570,\u8bf7\u5728\u4e8b\u4ef6\u5faa\u73af\u4e2d\u4f7f\u7528,\u8bf7\u786e\u8ba4\u5f00\u542f\u7f51\u7edc\u7ed3\u679c\u50a8\u5b58!!!</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_id: \u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u4efb\u52a1\u7ed3\u679c,\u5982\u679c\u672a\u5b8c\u6210\u5219\u8fd4\u56deNone</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b</li> </ul> <pre><code>import asyncio\nimport time\nfrom task_scheduling.variable import *\n\n\ndef calculation_task(x, y):\n    time.sleep(4)\n    return x * y\n\n\nasync def main_async():\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.result_server import get_task_result\n\n    task_id1 = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"linear_task\",\n        calculation_task, priority_low, 5, 10\n    )\n\n    result = await get_task_result(task_id1)\n    print(result)  # \u8f93\u51fa: 50\n    return result\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.manager import task_scheduler\n    from task_scheduling.result_server import result_server\n\n    # \u542f\u52a8\u7ed3\u679c\u5b58\u50a8\u670d\u52a1\u5668\n    result_server.start_server()\n\n    try:\n        asyncio.run(main_async())\n        while True:\n            time.sleep(1)\n    except KeyboardInterrupt:\n        task_scheduler.shutdown_scheduler()\n</code></pre>"},{"location":"network/status_query/","title":"\u72b6\u6001\u67e5\u8be2","text":""},{"location":"network/status_query/#_1","title":"\u83b7\u53d6\u6240\u6709\u4efb\u52a1\u72b6\u6001","text":"<p>get_tasks_info() -&gt; str</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>\u8fd4\u56de: \u5305\u542b\u4efb\u52a1\u72b6\u6001\u7684\u5b57\u7b26\u4e32</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\nfrom task_scheduling.variable import *\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import RPCClient\n    from task_scheduling.task_creation import task_creation\n\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", lambda: time.sleep(2), priority_low)\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task2\", lambda: time.sleep(3), priority_low)\n\n    time.sleep(1)\n    with RPCClient() as client:\n        # \u83b7\u53d6\u6240\u6709\u4efb\u52a1\u72b6\u6001\n        print(client.get_tasks_info())\n</code></pre>"},{"location":"network/status_query/#_2","title":"\u83b7\u53d6\u7279\u5b9a\u4efb\u52a1\u72b6\u6001","text":"<p>get_task_status(task_id: str) -&gt; Optional[Dict[str, Optional[Union[str, float, bool]]]]</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_id: \u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u5305\u542b\u4efb\u52a1\u72b6\u6001\u7684\u5b57\u5178</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\nfrom task_scheduling.variable import *\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import RPCClient\n    from task_scheduling.task_creation import task_creation\n\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", lambda: time.sleep(2), priority_low)\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task2\", lambda: time.sleep(3), priority_low)\n\n    time.sleep(1)\n    with RPCClient() as client:\n        # \u83b7\u53d6\u7279\u5b9a\u4efb\u52a1\u72b6\u6001\n        task_id = \"your_task_id_here\"\n        print(client.get_task_status(task_id))\n</code></pre>"},{"location":"network/status_query/#_3","title":"\u83b7\u53d6\u4efb\u52a1\u603b\u6570","text":"<p>get_task_count(task_name) -&gt; int</p> <p>get_all_task_count() -&gt; Dict[str, int]</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_name: \u51fd\u6570\u540d\u5b57</p> <p>\u8fd4\u56de: \u5b57\u5178\u6216\u8005\u6574\u6570</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import RPCClient\n    from task_scheduling.task_creation import task_creation\n\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", lambda: time.sleep(2), priority_low)\n    task_creation(None, None, FUNCTION_TYPE_IO, True, \"task2\", lambda: time.sleep(3), priority_low)\n\n    time.sleep(1)\n    with RPCClient() as client:\n        # \u83b7\u53d6\u4efb\u52a1\u8ba1\u6570\n        print(client.get_task_count(\"task1\"))\n        print(client.get_all_task_count())\n</code></pre>"},{"location":"network/task_control/","title":"\u4efb\u52a1\u63a7\u5236","text":""},{"location":"network/task_control/#_1","title":"\u6682\u505c\u6216\u6062\u590d\u4efb\u52a1\u8fd0\u884c","text":"<p>pause_api(task_type: str, task_id: str) -&gt; bool</p> <p>resume_api(task_type: str, task_id: str) -&gt; bool</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u4efb\u52a1\u6682\u505c\u65f6\u5019,\u8d85\u65f6\u8ba1\u65f6\u5668\u4f9d\u7136\u5728\u8fd0\u4f5c,\u5982\u679c\u9700\u8981\u4f7f\u7528\u6682\u505c\u529f\u80fd\u5efa\u8bae\u5173\u95ed\u8d85\u65f6\u5904\u7406,\u9632\u6b62\u5f53\u4efb\u52a1\u6062\u590d\u65f6\u5019\u56e0\u4e3a\u8d85\u65f6\u88ab\u7ec8\u6b62,\u5728<code>Linux</code>,<code>Mac</code> \u4e2d\u4e0d\u652f\u6301\u7ebf\u7a0b\u4efb\u52a1\u6682\u505c\u6062\u590d,\u53ea\u652f\u6301\u8fdb\u7a0b\u8fdb\u7a0b\u4efb\u52a1,\u6682\u505c\u5c06\u6682\u505c\u6574\u4e2a\u8fdb\u7a0b\u7684\u4efb\u52a1</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_type: \u4efb\u52a1\u6240\u5728\u7684\u8c03\u5ea6\u5668 (<code>CPU_ASYNCIO</code>, <code>IO_ASYNCIO</code>, <code>CPU_LINER</code>, <code>IO_LINER</code>, <code>TIMER</code>)</p> <p>task_id: \u8981\u63a7\u5236\u7684\u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u5e03\u5c14\u503c\uff0c\u8868\u793a\u64cd\u4f5c\u662f\u5426\u6210\u529f</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\nfrom task_scheduling.variable import *\nfrom task_scheduling.utils import interruptible_sleep\n\n\ndef long_running_task():\n    for i in range(10):\n        interruptible_sleep(1)\n        print(i)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import RPCClient\n    from task_scheduling.task_creation import task_creation\n\n    task_id = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"long_task\",\n        long_running_task, priority_low\n    )\n    with RPCClient() as client:\n        time.sleep(2)\n        client.pause_api(IO_LINER, task_id)  # \u6682\u505c\u4efb\u52a1\n        time.sleep(2)\n        client.resume_api(IO_LINER, task_id)  # \u6062\u590d\u4efb\u52a1\n</code></pre>"},{"location":"network/task_control/#_2","title":"\u5f3a\u5236\u7ec8\u6b62\u8fd0\u884c\u4efb\u52a1","text":"<p>kill_api(task_type: str, task_id: str) -&gt; bool</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u4ee3\u7801\u4e0d\u652f\u6301\u7ec8\u6b62\u5835\u585e\u578b\u4efb\u52a1,\u5bf9\u4e8e<code>time.sleep</code>\u7ed9\u51fa\u4e86\u66ff\u4ee3\u7684\u7248\u672c,\u5f53\u8981\u8fdb\u884c\u957f\u65f6\u95f4\u7b49\u5f85\u8bf7\u4f7f\u7528<code>interruptible_sleep</code>,\u5f02\u6b65\u4ee3\u7801\u4f7f\u7528 <code>await asyncio.sleep</code></p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_type: \u4efb\u52a1\u7c7b\u578b</p> <p>task_id: \u8981\u7ec8\u6b62\u7684\u4efb\u52a1ID</p> <p>\u8fd4\u56de: \u5e03\u5c14\u503c\uff0c\u8868\u793a\u7ec8\u6b62\u662f\u5426\u6210\u529f</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\nfrom task_scheduling.utils import interruptible_sleep\nfrom task_scheduling.variable import *\n\n\ndef long_running_task():\n    for i in range(10):\n        interruptible_sleep(1)\n        print(i)\n\n\nif __name__ == \"__main__\":\n    from task_scheduling.client import RPCClient\n    from task_scheduling.task_creation import task_creation\n\n    task_id = task_creation(\n        None, None, FUNCTION_TYPE_IO, True, \"long_task\",\n        long_running_task, priority_low\n    )\n    with RPCClient() as client:\n        time.sleep(2)\n        client.kill_api(IO_LINER, task_id)  # \u7ec8\u6b62\u4efb\u52a1\n</code></pre>"},{"location":"network/task_disabling/","title":"\u4efb\u52a1\u7981\u7528","text":""},{"location":"network/task_disabling/#_1","title":"\u6dfb\u52a0\u6216\u5220\u9664\u7981\u7528\u4efb\u52a1\u540d\u79f0","text":"<p>add_ban_task_name(task_name: str) -&gt; None</p> <p>remove_ban_task_name(task_name: str) -&gt; None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5df2\u7ecf\u8fdb\u5165\u8c03\u5ea6\u5668\u7684\u4efb\u52a1\u5c06\u4e0d\u4f1a\u88ab\u5904\u7406\uff0c\u53ea\u6709\u5728\u4efb\u52a1\u72b6\u6001\u4e3a<code>queued</code>\u624d\u4f1a\u88ab\u53d6\u6d88</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_name: \u51fd\u6570\u540d\u5b57</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\n\ndef line_task(input_info):\n    while True:\n        time.sleep(1)\n        print(input_info)\n\n\ninput_info = \"test\"\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.client import RPCClient\n    from task_scheduling.variable import *\n\n    # \u521b\u5efa\u7b2c\u4e00\u4e2a\u4efb\u52a1\n    task_id1 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, input_info)\n    with RPCClient() as client:\n        # \u6dfb\u52a0\u4efb\u52a1\u540d\u79f0\u5230\u9ed1\u540d\u5355\n        client.add_ban_task_name(\"task1\")\n\n    # \u8fd9\u4e2a\u4efb\u52a1\u5c06\u88ab\u62e6\u622a\n    task_id2 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, input_info)\n    with RPCClient() as client:\n        # \u4ece\u9ed1\u540d\u5355\u79fb\u9664\n        client.remove_ban_task_name(\"task1\")\n\n    # \u8fd9\u4e2a\u4efb\u52a1\u53ef\u4ee5\u6b63\u5e38\u521b\u5efa\n    task_id3 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, \"1111\")\n</code></pre>"},{"location":"network/task_disabling/#_2","title":"\u53d6\u6d88\u961f\u5217\u4e2d\u67d0\u7c7b\u4efb\u52a1","text":"<p>cancel_the_queue_task_by_name(task_name: str) -&gt; None</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u5df2\u7ecf\u8fdb\u5165\u8c03\u5ea6\u5668\u7684\u4efb\u52a1\u5c06\u4e0d\u4f1a\u88ab\u5904\u7406\uff0c\u53ea\u6709\u5728\u4efb\u52a1\u72b6\u6001\u4e3a<code>queued</code>\u624d\u4f1a\u88ab\u53d6\u6d88</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>task_name: \u51fd\u6570\u540d\u5b57</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>import time\n\n\ndef line_task(input_info):\n    while True:\n        time.sleep(1)\n        print(input_info)\n\n\ninput_info = \"test\"\n\nif __name__ == \"__main__\":\n    from task_scheduling.task_creation import task_creation\n    from task_scheduling.client import RPCClient\n    from task_scheduling.variable import *\n\n    # \u521b\u5efa\u7b2c\u4e00\u4e2a\u4efb\u52a1\n    task_id1 = task_creation(None, None, FUNCTION_TYPE_IO, True, \"task1\", line_task, priority_low, input_info)\n    with RPCClient() as client:\n        # \u53d6\u6d88\u961f\u5217\u4e2d\u7684\u4efb\u52a1\n        client.cancel_the_queue_task_by_name(\"task1\")\n</code></pre>"},{"location":"utils/random/","title":"\u968f\u673a\u540d\u5b57","text":""},{"location":"utils/random/#_1","title":"\u968f\u673a\u540d\u5b57","text":"<p>random_name(prefix: str) -&gt; str:</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>prefix: \u968f\u673a\u540d\u5b57\u524d\u7f00</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.utils import random_name\n\nprint(random_name(\"test\"))\n</code></pre>"},{"location":"utils/sleep/","title":"\u975e\u963b\u585e\u7761\u7720","text":""},{"location":"utils/sleep/#_1","title":"\u975e\u963b\u585e\u7761\u7720","text":"<p>interruptible_sleep(seconds: Union[float, int]) -&gt; None:</p> <ul> <li>\u8b66\u544a:</li> </ul> <p>\u8fd9\u4e2a\u53c2\u6570\u9002\u5408\u6bd4\u5982\u7761\u7720100\u79d2\u4e4b\u7c7b\u7684,\u6709\u5fae\u5c0f\u7684\u6027\u80fd\u635f\u8017,\u5982\u679c\u4e0d\u662f\u5fc5\u8981\u6216\u8005\u7761\u7720\u65f6\u95f4\u5f88\u77ed\u4e0d\u5efa\u8bae\u4f7f\u7528</p> <ul> <li>\u53c2\u6570\u8bf4\u660e:</li> </ul> <p>seconds: \u7761\u7720\u591a\u4e45(\u79d2)</p> <ul> <li>\u4f7f\u7528\u793a\u4f8b:</li> </ul> <pre><code>from task_scheduling.utils import interruptible_sleep\n\n\ndef linear_task(input_info):\n    for i in range(10):\n        interruptible_sleep(1)\n        print(f\"Linear task: {input_info} - {i}\")\n</code></pre>"}]}